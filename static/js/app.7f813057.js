(function(){"use strict";var t={5664:function(t,e,a){var l=a(2189),o=a(9377),n=a.n(o),s=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("el-container",[e("el-header",[e("div",{staticStyle:{display:"flex"}},[e("span",{staticStyle:{"margin-right":"20px"}},[t._v("成员工时日历")]),e("el-select",{staticStyle:{width:"160px"},attrs:{placeholder:"请选择"},model:{value:t.selectvalue,callback:function(e){t.selectvalue=e},expression:"selectvalue"}},t._l(t.options,(function(t){return e("el-option",{key:t.selectvalue,attrs:{label:t.label,value:t.selectvalue}})})),1)],1),e("div",{staticClass:"block"},[e("span",{staticClass:"tolastdate",staticStyle:{color:"rgb(150, 150, 150)",position:"relative",bottom:"2px",right:"20px","font-size":"20px",cursor:"pointer"},on:{click:t.reduceDays}},[t._v("<")]),e("el-date-picker",{staticStyle:{border:"0",position:"relative",bottom:"5px"},attrs:{type:"daterange","start-placeholder":"开始日期","end-placeholder":"结束日期",format:"yyyy 年 MM 月 dd 日","value-format":"yyyy-MM-dd"},model:{value:t.datavalue,callback:function(e){t.datavalue=e},expression:"datavalue"}}),e("span",{staticClass:"tonextdate",staticStyle:{color:"rgb(160, 160, 160)",position:"relative",bottom:"2px",right:"10px","font-size":"20px",cursor:"pointer"},on:{click:t.addDays}},[t._v(">")])],1),e("div",{staticStyle:{display:"flex","align-items":"center"}},[e("el-button",{staticStyle:{height:"35px"},attrs:{disabled:""}},[t._v("今天")]),e("el-button",{staticStyle:{height:"35px"},attrs:{disabled:"",type:"primary",icon:"el-icon-edit"}}),e("el-button",{staticStyle:{height:"35px"},attrs:{disabled:"",type:"primary",icon:"el-icon-edit"}})],1)]),t.isShowTable?e("el-main",{staticStyle:{position:"relative"}},[e("el-button",{staticStyle:{position:"absolute",left:"188px",top:"10px","z-index":"999","border-radius":"50%",width:"31px","font-size":"24px",padding:"2px","background-color":"rgb(40,120,255)"},attrs:{type:"primary"},on:{click:t.handleAdd}},[t._v("+")]),e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"","header-cell-style":{textAlign:"center"},"row-style":{height:"45px"}},on:{"cell-click":t.handleCellClick}},[[e("el-table-column",{attrs:{prop:t.userColumn.prop,label:t.userColumn.label,width:240,height:200,fixed:!0},scopedSlots:t._u([{key:"default",fn:function(l){return[e("div",{staticStyle:{display:"flex"}},[e("div",{staticClass:"userImg",staticStyle:{"border-radius":"50%",overflow:"hidden"}},[e("img",{staticStyle:{"background-color":"pink"},attrs:{src:a(7133),height:"40px",width:"40px"}})]),e("div",{staticStyle:{display:"flex","flex-direction":"column","margin-left":"5px"}},[e("div",{staticClass:"username",staticStyle:{color:"black","font-weight":"400"}},[t._v(" "+t._s(l.row[t.userColumn.prop])+" ")]),e("div",{staticStyle:{color:"rgb(167, 167, 167)"}},[t._v("合计："+t._s(t.getUserTotalTime(l.row)))])]),e("div",{staticClass:"userextend",staticStyle:{color:"rgb(160, 160, 160)",position:"relative",left:"70px","font-size":"16px",cursor:"pointer"}},[t._v("> ")])])]}}],null,!1,3281762021)}),t._l(t.otherColumns,(function(a){return e("el-table-column",{key:a.prop,attrs:{prop:a.prop,label:a.label,width:240,height:200},scopedSlots:t._u([{key:"default",fn:function(l){return[e("div",{staticClass:"content",staticStyle:{display:"flex","justify-content":"space-between"}},[e("div",{staticClass:"thing",staticStyle:{width:"80%","background-color":"","text-overflow":"ellipsis",overflow:"hidden","text-wrap":"nowrap"}},[t._v(" "+t._s(l.row[a.prop])+" ")]),e("div",{staticClass:"useTime",staticStyle:{color:"rgb(159, 159, 159)","font-size":"12px"}},[t._l(t.handleRegTest(l.row),(function(e){return[e===a.prop?[t._v(" "+t._s(l.row["t"+a.prop])+" ")]:t._e()]}))],2)])]}}],null,!0)})}))]],2)],1):e("el-main",{staticStyle:{"font-size":"24px"}},[t._v(" 请选择日期↑ ")])],1)],1)},i=[],r=(a(381),{name:"App",components:{},data(){return{options:[{value:"选项1",label:"黄金糕"},{value:"选项2",label:"双皮奶"}],selectvalue:"",datavalue:"",tableData:[{user:"测试",20240526:"吃饭",t20240526:"5小时",20240527:"",20240528:"",20240529:"",20240530:"",20240531:""}],columns:[{prop:"user",label:"",width:180},{prop:"20240527",label:"周一 5/27"},{prop:"20240528",label:"周二 5/28"},{prop:"20240529",label:"周三 5/29"},{prop:"20240530",label:"周四 5/30"},{prop:"20240531",label:"周五 5/31"}],totalDays:7,alldata:[],isShowTable:!1}},methods:{getDateInfo(t){const e=new Date(t);if(isNaN(e.getTime()))throw new Error("Invalid date string");const a=["周日","周一","周二","周三","周四","周五","周六"],l=e.getDay(),o=e.getMonth()+1,n=e.getDate()<10?"0"+e.getDate():e.getDate(),s=`${o}/${n}`;return{dayOfWeek:a[l],formattedDate:s}},calculateDaysDifference(t){if(t.length<2)throw new Error("Input array must contain at least two date strings");t.sort(((t,e)=>new Date(t)-new Date(e)));let e=0;for(let a=1;a<t.length;a++){const l=new Date(t[a-1]),o=new Date(t[a]),n=o-l,s=Math.ceil(n/864e5);e+=s}return e},handleAdd(){this.$confirm('<input type="text" class="addContent">\n              <el-upload\n          class="avatar-uploader"\n          :show-file-list="false"\n          auto-upload="false"\n          :on-change="onSelectFile"\n        >\n          <img v-if="imgUrl" :src="imgUrl" class="avatar" />\n          <el-icon v-else class="avatar-uploader-icon"><Plus /></el-icon>\n        </el-upload>\n      ',"用户添加",{dangerouslyUseHTMLString:!0},{distinguishCancelAndClose:!0,confirmButtonText:"保存",cancelButtonText:"放弃修改"}).then((()=>{this.$message({type:"success",message:"保存修改"});let t=document.querySelector(".addContent").value;this.tableData.push({user:t}),this.tableDataUpdate(),localStorage.setItem("tableData",JSON.stringify(this.tableData))})).catch((t=>{this.$message({type:"info",message:"cancel"===t?"放弃保存":"停留在当前页面"})}))},generateDatesBetween(t){if(t.length<2)throw new Error("Input array must contain at least two date strings");let e=new Date(t[0]),a=new Date(t[t.length-1]);if(isNaN(e.getTime())||isNaN(a.getTime()))throw new Error("Invalid date string");let l=[];e>a&&([e,a]=[a,e]);let o=new Date(e);while(o<=a){const t=o.getFullYear(),e=String(o.getMonth()+1).padStart(2,"0"),a=String(o.getDate()).padStart(2,"0");l.push(`${t}-${e}-${a}`),o.setDate(o.getDate()+1)}return l},handleCellClick(t,e,a,l){console.log(t),console.log(e),console.log(a),console.log(l),"user"===e.property?(this.$confirm('<input type="text" class="editContent">',"用户名修改",{dangerouslyUseHTMLString:!0},{distinguishCancelAndClose:!0,confirmButtonText:"保存",cancelButtonText:"放弃修改"}).then((()=>{this.$message({type:"success",message:"保存修改"},Object.keys(t).forEach((a=>{e.property===a&&(console.log(t[a]),t[a]=document.querySelector(".editContent").value,localStorage.setItem("tableData",JSON.stringify(this.tableData)))})))})).catch((t=>{this.$message({type:"info",message:"cancel"===t?"放弃保存":"停留在当前页面"})})),document.querySelector(".editContent").value="",document.querySelector(".editTime").value=""):(this.$confirm('<label>工作名称：</label><input type="text" class="editContent"><br><label>工作时间：</label><input type="text" class="editTime">小时',"内容修改",{dangerouslyUseHTMLString:!0},{distinguishCancelAndClose:!0,confirmButtonText:"保存",cancelButtonText:"放弃修改"}).then((()=>{this.$message({type:"success",message:"保存修改"},Object.keys(t).forEach((a=>{if(e.property===a){console.log(t[a]),t[a]=document.querySelector(".editContent").value;const e="t"+a;console.log(e),t[e]=document.querySelector(".editTime").value+"小时"}localStorage.setItem("tableData",JSON.stringify(this.tableData))})))})).catch((t=>{this.$message({type:"info",message:"cancel"===t?"放弃保存":"停留在当前页面"})})),document.querySelector(".editContent").value="",document.querySelector(".editTime").value="")},tableDataUpdate(){this.tableData.forEach((t=>{this.alldata.forEach((e=>{e in t||l["default"].set(t,e,"")}))}))},addDaysToDateRange(t,e){const a=t.map((t=>new Date(t))),l=a.map((t=>{const a=new Date(t);return a.setDate(a.getDate()+e),a.toISOString().split("T")[0]}));return l},addDays(){const t=this.addDaysToDateRange(this.datavalue,this.totalDays);console.log(t),this.datavalue=t},reduceDays(){const t=this.addDaysToDateRange(this.datavalue,-this.totalDays);console.log(t),this.datavalue=t},handleRegTest(t){const e=[];for(let a in t)if(/^t/.test(a)){const t=a.substring(1);e.push(t)}return e},getUserTotalTime(t){let e=0;for(let a in t)/^t/.test(a)&&(console.log(t[a]),e+=parseInt(t[a]));return console.log("-----------"),e+"小时"}},watch:{datavalue(t,e){console.log(t);const a=t.map((t=>"string"===typeof t?t:t.toISOString().split("T")[0]));this.totalDays=this.calculateDaysDifference(a)+1,this.totalDays>90&&(this.totalDays=90,this.datavalue=e,alert("不能超过90天")),console.log(this.totalDays),this.columns=[{prop:"user",label:"",width:180}];for(let l=0;l<this.totalDays;l++)this.columns.push({prop:this.generateDatesBetween(t)[l].split("-").join(""),label:this.getDateInfo(this.generateDatesBetween(t)[l]).dayOfWeek+this.getDateInfo(this.generateDatesBetween(t)[l]).formattedDate,width:180});console.log(this.tableData),this.tableData.forEach((e=>{console.log(e);for(let a=0;a<this.totalDays;a++)this.alldata.push(this.generateDatesBetween(t)[a].split("-").join(""));this.alldata.forEach((t=>{t in e||l["default"].set(e,t,"")}))})),console.log(this.tableData),localStorage.setItem("datavalue",JSON.stringify(this.datavalue)),localStorage.setItem("columns",JSON.stringify(this.columns)),localStorage.setItem("tableData",JSON.stringify(this.tableData))},totalDays(){this.isShowTable=!0}},mounted(){localStorage.getItem("datavalue")&&(this.datavalue=JSON.parse(localStorage.getItem("datavalue"))),localStorage.getItem("columns")&&(this.columns=JSON.parse(localStorage.getItem("columns"))),localStorage.getItem("tableData")&&(this.tableData=JSON.parse(localStorage.getItem("tableData")))},computed:{userColumn(){return this.columns.find((t=>"user"===t.prop))},otherColumns(){return this.columns.filter((t=>"user"!==t.prop))}}}),c=r,u=a(9592),d=(0,u.A)(c,s,i,!1,null,"766c745a",null),p=d.exports;l["default"].config.productionTip=!1,l["default"].use(n()),new l["default"]({render:t=>t(p)}).$mount("#app")},7133:function(t,e,a){t.exports=a.p+"static/img/123.83630eb5.gif"}},e={};function a(l){var o=e[l];if(void 0!==o)return o.exports;var n=e[l]={id:l,loaded:!1,exports:{}};return t[l].call(n.exports,n,n.exports,a),n.loaded=!0,n.exports}a.m=t,function(){a.amdO={}}(),function(){var t=[];a.O=function(e,l,o,n){if(!l){var s=1/0;for(u=0;u<t.length;u++){l=t[u][0],o=t[u][1],n=t[u][2];for(var i=!0,r=0;r<l.length;r++)(!1&n||s>=n)&&Object.keys(a.O).every((function(t){return a.O[t](l[r])}))?l.splice(r--,1):(i=!1,n<s&&(s=n));if(i){t.splice(u--,1);var c=o();void 0!==c&&(e=c)}}return e}n=n||0;for(var u=t.length;u>0&&t[u-1][2]>n;u--)t[u]=t[u-1];t[u]=[l,o,n]}}(),function(){a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,{a:e}),e}}(),function(){a.d=function(t,e){for(var l in e)a.o(e,l)&&!a.o(t,l)&&Object.defineProperty(t,l,{enumerable:!0,get:e[l]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){a.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t}}(),function(){a.p=""}(),function(){var t={524:0};a.O.j=function(e){return 0===t[e]};var e=function(e,l){var o,n,s=l[0],i=l[1],r=l[2],c=0;if(s.some((function(e){return 0!==t[e]}))){for(o in i)a.o(i,o)&&(a.m[o]=i[o]);if(r)var u=r(a)}for(e&&e(l);c<s.length;c++)n=s[c],a.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return a.O(u)},l=self["webpackChunkproject_table"]=self["webpackChunkproject_table"]||[];l.forEach(e.bind(null,0)),l.push=e.bind(null,l.push.bind(l))}();var l=a.O(void 0,[504],(function(){return a(5664)}));l=a.O(l)})();
//# sourceMappingURL=app.7f813057.js.map